## [Git Remote Repository]
	SUPPORTED_TFA=("v2.2")
	SUPPORTED_UBOOT=("2020.01")
	SUPPORTED_UBOOT_TAGS=("latest")
	SUPPORTED_LINUX=("5.4.31")
	SUPPORTED_LINUX_TAGS=("latest")

	case $"$TFA" in 
		v2.2)
			TFA_SOURCE_URL="https://bitbucket.org/CheezeCake/tf-a_stm32mp157d-alientek.git"
			TFA_GIT_BRANCH="ebf-image-builder"
			TFA_COMPILER="arm-linux-gnueabihf-"
			TFA_DIR="$ROOT/tf-a_stm32mp157d-alientek"
			TFA_EXTRA_ARGS="-f Makefile.sdk LDFLAGS=-znoexecstack TFA_DEVICETREE=stm32mp157d-atk all"
			TFA_BUILD_FILE="tf-a-stm32mp157d-atk-trusted.stm32"
	esac

	
	case "$UBOOT" in
		2020.01)
			UBOOT_SOURCE_URL="https://bitbucket.org/CheezeCake/u-boot_stm32mp157d-alientek.git" # override source url
			UBOOT_GIT_BRANCH="main"
			UBOOT_COMPILER="arm-linux-gnueabihf-"
			UBOOT_DIR="$ROOT/u-boot_stm32mp157d-alientek"
#			SPL_BUILD_FILE="u-boot-spl.stm32"
			UBOOT_BUILD_FILE="u-boot.stm32"
			NUBOOT_FILE="u-boot.stm32"
			MUBOOT_FILE="u-boot.stm32"
			UBOOT_MMC_DEFCONFIG="stm32mp15_atk_trusted_defconfig"
			UBOOT_NAND_DEFCONFIG="stm32mp15_atk_trusted_defconfig"			
			UBOOT_EXTRA_ARGS="all DEVICE_TREE=stm32mp157d-atk"
			;;
	esac

	case "$UBOOT_TAGS" in
		latest)
			UBOOT_GIT_TAGS=""
			;;
	esac

	case "$LINUX" in
		5.4.31)
			LINUX_SOURCE_URL="https://bitbucket.org/CheezeCake/linux_stm32mp157d-alientek.git" # override source url
			LINUX_MMC_DTB="stm32mp157d-atk.dtb"
			LINUX_NAND_DTB="stm32mp157d-atk.dtb"
			LINUX_GIT_BRANCH="dt-adc-channels"
			LINUX_DEFCONFIG="stm32mp1_atk_defconfig"
			KERNEL_COMPILER="arm-linux-gnueabihf-"
			LINUX_DIR="$ROOT/linux_stm32mp157d-alientek"
			#KDEB_VERSION="1stable"
			KDEB_VERSION="1.$(date +%g%m)stable"
			LOCAL_VERSION="-stm-r1"
			KERNEL_DEB="linux-image-${LINUX}${LOCAL_VERSION}_${KDEB_VERSION}_armhf.deb"
			KERNEL_EXTRA_ARGS="KCFLAGS=-march=armv7-a"
			;;
	esac

	case "$LINUX_TAGS" in
		latest)
			LINUX_GIT_TAGS=""
			;;
	esac

## [Firmware]
	ROOT_FIRMWARE_PATH=""
	NEED_EXT4_IMG="true"
## [Image Build Info]
	ARCH=arm
	ebf_repo_dist="carp-stm32-mp157"
	deb_arch="armhf"
	time=$(date +%Y-%m-%d)
	image_name="${deb_distribution}-${release}-${DISTRIB_TYPE}-${deb_arch}-${time}"
	target_name="stm32mp157"
	options="--img-2gb ${target_name}-${image_name} --enable-fat-partition"
	options="${options} --enable-uboot-cape-overlays --force-device-tree ${LINUX_MMC_DTB} "
	options="${options} --backup-device-tree ${LINUX_NAND_DTB} --bootloader ${BUILD} "
	conf_board="fire-stm32mp157-star"
	chroot_COPY_SETUP_SDCARD="enable"
	chroot_bootPart_logo="enable"
	chroot_custom_setup_sdcard="stm32mp1_setup_sdcard.sh"
	chroot_sdcard_flashlayout="create_sdcard_from_flashlayout.sh"
	include_firmware="enable"
## [Bootloader Partition]
	bootloader_location="part_spl_uboot_boot"
## [UBOOT_SPL Configs]	
	spl_name="$SPL_BUILD_FILE"
	dd_spl_uboot_count="2"
	dd_spl_uboot_seek="1"
	dd_spl_uboot_conf=""
	dd_spl_uboot_bs="17k"
## [Bootloader Partition]
	boot_name="$MUBOOT_FILE"
	dd_uboot_count="4"
	dd_uboot_seek="1"
	dd_uboot_conf=""
	dd_uboot_bs="529k"
	conf_boot_fstype="ext4"
	conf_boot_startmb="4"
	conf_boot_endmb="96"
	
	SERIAL="ttySTM0"

	conf_root_device="/dev/mmcblk1"
	USE_LOCAL_BOOT="yes"

	flashlayout_tsv="atk_sdcard-stm32mp157d-atk.tsv"
	bootscr_img="boot.scr.cmd"
## Extra software
	board_deb_include="libc6"

##	[Device Tree Overlays]
OVERLAYS=""
## BUS class/function
#dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-i2c1.dtbo
#dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-i2c2.dtbo
#dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-ltdc.dtbo
## DEV class/function
##dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-485r1.dtbo
##dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-485r2.dtbo
#dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-adc.dtbo
##dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-bluetooth.dtbo
##dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-btwifi.dtbo
#dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-can.dtbo
##dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-cam.dtbo
#dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-hdmi.dtbo
#dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-key.dtbo
#
#dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-lcd.dtbo
#dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-led.dtbo
##dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-mipi.dtbo
##dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-mpu6050.dtbo
#dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-sound.dtbo
#dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-touch-capacitive-goodix.dtbo
##dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-touch-capacitive-4.3.dtbo
##dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-usart1.dtbo
##dtoverlay=/usr/lib/linux-image-4.19.94-stm-r1/overlays/stm-fire-usart3.dtbo
#"

MMC0extlinux="
# Generic Distro Configuration file generated by OpenEmbedded
menu title Select the boot mode
#MENU BACKGROUND /splash.bmp
TIMEOUT 5
DEFAULT stm32mp157d-atk
LABEL stm32mp157d-atk
        KERNEL /kernel/vmlinuz-5.4.31-stm-r1
        INITRD /kernel/initrd.img-5.4.31-stm-r1
        #FDT /dtbs/5.4.31-stm-r1/stm32mp157d-atk.dtb
        APPEND root=/dev/mmcblk1p5 rootwait rw console=ttySTM0,115200 \${cmdline}	
"

MMC1extlinux="
# Generic Distro Configuration file generated by OpenEmbedded
menu title Select the boot mode
#MENU BACKGROUND /splash.bmp
TIMEOUT 5
DEFAULT stm32mp157a-atk
LABEL stm32mp157a-atk
        KERNEL /kernel/vmlinuz-5.4.31-stm-r1
        INITRD /kernel/initrd.img-5.4.31-stm-r1
        #FDT /dtbs/5.4.31-stm-r1/stm32mp157d-atk.dtb
        APPEND root=/dev/mmcblk2p5 rootwait rw console=ttySTM0,115200 \${cmdline}		
"

NANDextlinux="
# Generic Distro Configuration file generated by OpenEmbedded
menu title Select the boot mode
#MENU BACKGROUND /splash.bmp
TIMEOUT 5
DEFAULT stm32mp157d-atk
LABEL stm32mp157d-atk
        KERNEL /kernel/vmlinuz-5.4.31-stm-r1
        #FDT /dtbs/5.4.31-stm-r1/stm32mp157d-atk.dtb
        APPEND ubi.mtd=UBI rootfstype=ubifs root=ubi0:rootfs rootwait rw console=ttySTM0,115200 \${cmdline}
"


FlashLayout_NAND="
FlashLayout_NAND=\"
fsbl,/dev/mtd0,bin,x,/opt/backup/tfa/tf-a-stm32mp157d-atk-trusted.stm32
ssbl1,/dev/mtd1,bin,x,/opt/backup/uboot/u-boot.stm32
ssbl2,/dev/mtd2,bin,x,/opt/backup/uboot/u-boot.stm32
uboot_config,/dev/mtd3,x,0x7c000,x
uboot_config_r,/dev/mtd3,x,0x7c000,x
bootfs,/dev/mtd3,systemfs,0x1268000,x
rootfs,/dev/mtd3,systemfs,x,x\""

FlashLayout_EMMC="
FlashLayout_EMMC=\"
fsbl1,/dev/mmcblk1boot0,bin,x,/opt/backup/tfa/tf-a-stm32mp157d-atk-trusted.stm32
fsbl2,/dev/mmcblk1boot1,bin,x,/opt/backup/tfa/tf-a-stm32mp157d-atk-trusted.stm32
ssbl,/dev/mmcblk1p1,ext4,0x00080000,/opt/backup/uboot/u-boot.stm32
bootfs,/dev/mmcblk1p2,ext4,0x00280000,x
vendorfs,/dev/mmcblk1p3,ext4,0x06680000,x
rootfs,/dev/mmcblk1p4,ext4,0x06700000,x\""


